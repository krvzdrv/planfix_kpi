# üìä –õ–æ–≥–∏–∫–∞ —Ä–∞—Å—á–µ—Ç–æ–≤ –æ—Ç—á–µ—Ç–æ–≤

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –ª–æ–≥–∏–∫–µ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Å–µ—Ö –æ—Ç—á–µ—Ç–æ–≤ —Å–∏—Å—Ç–µ–º—ã.

---

## üîÑ –û—Ç—á–µ—Ç –æ —Å—Ç–∞—Ç—É—Å–∞—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ (Status Report)

### üìç –û–ø–∏—Å–∞–Ω–∏–µ

–û—Ç—á–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–æ–≤ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º –≤–æ—Ä–æ–Ω–∫–∏ –ø—Ä–æ–¥–∞–∂ –∏ –∏—Ö –¥–≤–∏–∂–µ–Ω–∏–µ –º–µ–∂–¥—É —Å—Ç–∞—Ç—É—Å–∞–º–∏.

### üéØ –°—Ç–∞—Ç—É—Å—ã –∫–ª–∏–µ–Ω—Ç–æ–≤

**–ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã (–≤–æ—Ä–æ–Ω–∫–∞):**
- **NWI** (Nowi) - –ù–æ–≤—ã–µ –∫–ª–∏–µ–Ω—Ç—ã
- **WTR** (W trakcie) - –í —Ä–∞–±–æ—Ç–µ
- **PSK** (Perspektywiczni) - –ü–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–Ω—ã–µ

**–§–∏–Ω–∞–ª—å–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã:**
- **PIZ** (Pierwszy zamowienie) - –ü–µ—Ä–≤—ã–π –∑–∞–∫–∞–∑
- **STL** (Stali klienci) - –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã (‚â§30 —Ä–∞–±–æ—á–∏—Ö –¥–Ω–µ–π —Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∑–∞–∫–∞–∑–∞)
- **NAK** (Nieaktywni klienci) - –ù–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã (>30 —Ä–∞–±–æ—á–∏—Ö –¥–Ω–µ–π —Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∑–∞–∫–∞–∑–∞)
- **REZ** (Rezygnacja) - –û—Ç–∫–∞–∑
- **BRK** (Brak kontaktu) - –ù–µ—Ç –∫–æ–Ω—Ç–∞–∫—Ç–∞
- **ARC** (Archiwum) - –ê—Ä—Ö–∏–≤

### üîß –õ–æ–≥–∏–∫–∞ —Ä–∞—Å—á–µ—Ç–æ–≤

#### 0. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–Ω—è –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è

**–û—Ç—á–µ—Ç —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —Å –ø–æ—Å–ª–µ–¥–Ω–∏–º —Ä–∞–±–æ—á–∏–º –¥–Ω–µ–º:**

```python
if today == –ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫:
    last_workday = –ü—è—Ç–Ω–∏—Ü–∞ (today - 3 –¥–Ω—è)
elif today == –í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ:
    last_workday = –ü—è—Ç–Ω–∏—Ü–∞ (today - 2 –¥–Ω—è)
elif today == –°—É–±–±–æ—Ç–∞:
    last_workday = –ü—è—Ç–Ω–∏—Ü–∞ (today - 1 –¥–µ–Ω—å)
else:  # –í—Ç–æ—Ä–Ω–∏–∫-–ü—è—Ç–Ω–∏—Ü–∞
    last_workday = –í—á–µ—Ä–∞ (today - 1 –¥–µ–Ω—å)
```

**–ü–æ—á–µ–º—É —Ç–∞–∫:**
- –ú–µ–Ω–µ–¥–∂–µ—Ä—ã –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç –≤ –≤—ã—Ö–æ–¥–Ω—ã–µ
- –û—Ç—á–µ—Ç –≤ –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å –ø—è—Ç–Ω–∏—Ü—ã
- –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ —Å –ª–æ–≥–∏–∫–æ–π —Ä–∞—Å—á–µ—Ç–∞ STL/NAK (–ø–æ —Ä–∞–±–æ—á–∏–º –¥–Ω—è–º)

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å –¥–ª—è –≤—ã—Ö–æ–¥–Ω—ã—Ö:**
```
–ï—Å–ª–∏ –æ—Ç—á–µ—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ —Å—É–±–±–æ—Ç—É –∏–ª–∏ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ:
  - –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –∑–∞ –ü–Ø–¢–ù–ò–¶–£
  - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ: —á–µ—Ç–≤–µ—Ä–≥ vs –ø—è—Ç–Ω–∏—Ü–∞
  - –í –æ—Ç—á–µ—Ç–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø–æ–º–µ—Ç–∫–∞: "‚ö†Ô∏è –û—Ç—á–µ—Ç –∑–∞ –ø—è—Ç–Ω–∏—Ü—É DD.MM.YYYY (—Å–µ–≥–æ–¥–Ω—è –≤—ã—Ö–æ–¥–Ω–æ–π)"
```

#### 1. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –¥–∞—Ç—É

```python
def get_client_status_on_date(client_data, target_date):
    """
    –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –¥–∞—Ç—É.
    
    –õ–æ–≥–∏–∫–∞:
    1. –ë–µ—Ä–µ—Ç –≤—Å–µ –¥–∞—Ç—ã –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –∏–∑ –±–∞–∑—ã (data_dodania_do_*)
    2. –í—ã–±–∏—Ä–∞–µ—Ç —Å–∞–º—É—é –ø–æ—Å–ª–µ–¥–Ω—é—é –¥–∞—Ç—É <= target_date
    3. –ï—Å–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–∞—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ - –≤—ã–±–∏—Ä–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –ø–æ–∑–∂–µ –ø–æ –≤–æ—Ä–æ–Ω–∫–µ
    
    –ü–æ—Ä—è–¥–æ–∫ —Å—Ç–∞—Ç—É—Å–æ–≤: NWI ‚Üí WTR ‚Üí PSK ‚Üí PIZ ‚Üí REZ ‚Üí BRK ‚Üí ARC
    
    –ü—Ä–∏–º–µ—Ä:
    - WTR: 17.10.2025
    - PSK: 17.10.2025
    ‚Üí –í—ã–±–∏—Ä–∞–µ—Ç—Å—è PSK (–ø–æ–∑–∂–µ –≤ –≤–æ—Ä–æ–Ω–∫–µ)
    """
```

**–û—Å–æ–±–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è STL/NAK:**
- –≠—Ç–∏ —Å—Ç–∞—Ç—É—Å—ã —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –ø–æ –¥–∞—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∑–∞–∫–∞–∑–∞
- STL: ‚â§30 —Ä–∞–±–æ—á–∏—Ö –¥–Ω–µ–π —Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∑–∞–∫–∞–∑–∞
- NAK: >30 —Ä–∞–±–æ—á–∏—Ö –¥–Ω–µ–π —Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∑–∞–∫–∞–∑–∞
- –†–∞–±–æ—á–∏–µ –¥–Ω–∏ = –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫-–ø—è—Ç–Ω–∏—Ü–∞ (–≤—ã—Ö–æ–¥–Ω—ã–µ –Ω–µ —Å—á–∏—Ç–∞—é—Ç—Å—è)

#### 2. –†–∞—Å—á–µ—Ç Inflow (–ø—Ä–∏—Ç–æ–∫)

**–î–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤ —Å –ø–µ—Ä–µ—Ö–æ–¥–∞–º–∏ –°–ï–ì–û–î–ù–Ø:**
```python
transitions = get_daily_transitions_for_client(client_id, today)
# –ü—Ä–∏–º–µ—Ä: ['NWI', 'WTR', 'PSK', 'PIZ']

# –ö–∞–∂–¥—ã–π —Å—Ç–∞—Ç—É—Å –≤ —Ü–µ–ø–æ—á–∫–µ –ø–æ–ª—É—á–∞–µ—Ç +1 inflow
for status in transitions:
    inflow[status] += 1
```

**–î–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤:**
```python
# –ï—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç –ø–æ—è–≤–∏–ª—Å—è –≤ –Ω–æ–≤–æ–º —Å—Ç–∞—Ç—É—Å–µ (–Ω–µ –±—ã–ª –≤—á–µ—Ä–∞, –µ—Å—Ç—å —Å–µ–≥–æ–¥–Ω—è)
if today_status and yesterday_status != today_status:
    inflow[today_status] += 1
```

#### 3. –†–∞—Å—á–µ—Ç Outflow (–æ—Ç—Ç–æ–∫)

**–î–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤ —Å –ø–µ—Ä–µ—Ö–æ–¥–∞–º–∏ –°–ï–ì–û–î–ù–Ø:**
```python
# –í—Å–µ —Å—Ç–∞—Ç—É—Å—ã –≤ —Ü–µ–ø–æ—á–∫–µ –∫—Ä–æ–º–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø–æ–ª—É—á–∞—é—Ç +1 outflow
for i, status in enumerate(transitions):
    if i < len(transitions) - 1:
        outflow[status] += 1
```

**–î–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤:**
```python
# –ï—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç –ø–æ–∫–∏–Ω—É–ª —Å—Ç–∞—Ç—É—Å (–±—ã–ª –≤—á–µ—Ä–∞, –Ω–µ—Ç —Å–µ–≥–æ–¥–Ω—è)
if yesterday_status and yesterday_status != today_status:
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –Ω–µ –¥—É–±–ª–∏—Ä—É–µ–º (–∫–ª–∏–µ–Ω—Ç –Ω–µ –≤ —Ü–µ–ø–æ—á–∫–µ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤)
    if not transitions or yesterday_status not in transitions:
        outflow[yesterday_status] += 1
```

#### 4. –†–∞—Å—á–µ—Ç Net (—á–∏—Å—Ç–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ)

```python
net = inflow - outflow
```

**–ü—Ä–∏–º–µ—Ä—ã:**
- `[+1/-1]` ‚Üí net = 0 (–±—ã–ª –∏ —É—à–µ–ª)
- `[+7/-2]` ‚Üí net = 5 (–ø—Ä–∏—à–ª–æ –±–æ–ª—å—à–µ, —á–µ–º —É—à–ª–æ)
- `[+2/-0]` ‚Üí net = 2 (–ø—Ä–∏—à–ª–æ, –Ω–∏–∫—Ç–æ –Ω–µ —É—à–µ–ª)

#### 5. –†–∞—Å—á–µ—Ç RZM (–∏—Ç–æ–≥–æ)

```python
RZM = sum(all net changes)
```

**–ü—Ä–∏–º–µ—Ä—ã:**
- –í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ –¥–≤–∏–∂–µ–Ω–∏–µ: NWI(-7) + WTR(+5) + PSK(+2) = 0
- –ù–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç: NWI(0) + WTR(0) + PSK(0) + PIZ(+1) = +1
- –£—Ö–æ–¥ –∫–ª–∏–µ–Ω—Ç–∞: PIZ(-1) + REZ(+1) = 0

### üìä –ü—Ä–∏–º–µ—Ä—ã —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

#### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ù–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç –ø—Ä–æ—à–µ–ª –≤—Å—é –≤–æ—Ä–æ–Ω–∫—É –∑–∞ –¥–µ–Ω—å

**–ö–ª–∏–µ–Ω—Ç: NWI ‚Üí WTR ‚Üí PSK ‚Üí PIZ**

```
NWI ‚ñà 35 - [+1/-1] 15%  ‚Üê –∫–ª–∏–µ–Ω—Ç –±—ã–ª –≤ NWI –∏ —É—à–µ–ª
WTR ‚ñà 86 - [+1/-1] 37%  ‚Üê –∫–ª–∏–µ–Ω—Ç –±—ã–ª –≤ WTR –∏ —É—à–µ–ª
PSK ‚ñà 48 - [+1/-1] 21%  ‚Üê –∫–ª–∏–µ–Ω—Ç –±—ã–ª –≤ PSK –∏ —É—à–µ–ª
PIZ ‚ñà 10 +1 [+1/-0] 4%  ‚Üê –∫–ª–∏–µ–Ω—Ç –¥–æ—à–µ–ª –¥–æ –ø–µ—Ä–≤–æ–≥–æ –∑–∞–∫–∞–∑–∞
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
RZM 233 +1              ‚Üê —Ä–µ–∞–ª—å–Ω–æ +1 –Ω–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç –≤ —Å–∏—Å—Ç–µ–º–µ
```

#### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ö–ª–∏–µ–Ω—Ç—ã –ø–µ—Ä–µ–º–µ—â–∞–ª–∏—Å—å, –Ω–æ –Ω–æ–≤—ã—Ö –Ω–µ—Ç

**7 –∫–ª–∏–µ–Ω—Ç–æ–≤: NWI ‚Üí WTR (—É—à–ª–∏ –≤—á–µ—Ä–∞/—Ä–∞–Ω–µ–µ)**
**2 –∫–ª–∏–µ–Ω—Ç–∞: WTR ‚Üí PSK (–ø–µ—Ä–µ—à–ª–∏ —Å–µ–≥–æ–¥–Ω—è)**

```
NWI ‚ñà 33 -7 ‚ñº [+0/-7] 8%   ‚Üê 7 –∫–ª–∏–µ–Ω—Ç–æ–≤ —É—à–ª–æ (—Ä–∞–Ω—å—à–µ)
WTR ‚ñà 45 +5 ‚ñ≤ [+7/-2] 11%  ‚Üê 7 –ø—Ä–∏—à–ª–æ (—Ä–∞–Ω—å—à–µ), 2 —É—à–ª–æ (—Å–µ–≥–æ–¥–Ω—è)
PSK ‚ñà 130 +2 ‚ñ≤ [+2/-0] 32% ‚Üê 2 –ø—Ä–∏—à–ª–æ (—Å–µ–≥–æ–¥–Ω—è)
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
RZM 411 -                   ‚Üê –Ω–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ –¥–≤–∏–∂–µ–Ω–∏–µ)
```

#### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ö–ª–∏–µ–Ω—Ç —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ –¥–∞—Ç–∞–º–∏

**–ö–ª–∏–µ–Ω—Ç –∏–º–µ–µ—Ç –≤ –±–∞–∑–µ:**
```
data_dodania_do_w_trakcie = 17.10.2025
data_dodania_do_perspektywiczni = 17.10.2025
```

**–õ–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞:**
- –û–±–µ –¥–∞—Ç—ã = 17.10.2025
- WTR –∏–¥–µ—Ç —Ä–∞–Ω—å—à–µ PSK –≤ –≤–æ—Ä–æ–Ω–∫–µ
- **–í—ã–±–∏—Ä–∞–µ—Ç—Å—è PSK** (–ø–æ–∑–∂–µ –≤ –≤–æ—Ä–æ–Ω–∫–µ) ‚úÖ

### üîç –í–∞–∂–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

1. **–î–∞—Ç—ã —Å—Ç–∞—Ç—É—Å–æ–≤ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑** –∑–∞ –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –∫–ª–∏–µ–Ω—Ç–∞
2. **–ü—Ä–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –¥–∞—Ç–∞—Ö** –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è —Å—Ç–∞—Ç—É—Å, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–∂–µ –≤ –≤–æ—Ä–æ–Ω–∫–µ
3. **STL/NAK** —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –ø–æ –¥–∞—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∑–∞–∫–∞–∑–∞
4. **–†–∞–±–æ—á–∏–µ –¥–Ω–∏** –¥–ª—è STL/NAK –∏—Å–∫–ª—é—á–∞—é—Ç —Å—É–±–±–æ—Ç—É –∏ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ
5. **–ü–µ—Ä–µ—Ö–æ–¥—ã –∑–∞ –æ–¥–∏–Ω –¥–µ–Ω—å** –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è –∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
6. **Net = Inflow - Outflow** –¥–ª—è –≤—Å–µ—Ö —Å—Ç–∞—Ç—É—Å–æ–≤
7. **RZM = —Å—É–º–º–∞ –≤—Å–µ—Ö Net** - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤

### üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

**–§—É–Ω–∫—Ü–∏–∏:**
- `get_client_status_on_date()` - –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –¥–∞—Ç—É
- `get_clients_by_status_for_date()` - –≥—Ä—É–ø–ø–∏—Ä—É–µ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º –Ω–∞ –¥–∞—Ç—É
- `get_daily_transitions_for_client()` - –ø–æ–ª—É—á–∞–µ—Ç –≤—Å–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –∫–ª–∏–µ–Ω—Ç–∞ –∑–∞ –¥–µ–Ω—å
- `count_workdays()` - —Å—á–∏—Ç–∞–µ—Ç —Ä–∞–±–æ—á–∏–µ –¥–Ω–∏ –º–µ–∂–¥—É –¥–≤—É–º—è –¥–∞—Ç–∞–º–∏

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
- –¢–∞–±–ª–∏—Ü–∞: `planfix_clients`
- –ò—Å—Ç–æ—Ä–∏—è: `report_clients_status_history` (—Ç–æ–ª—å–∫–æ –¥–ª—è STL/NAK)

---

## üí∞ –û—Ç—á–µ—Ç –æ –ø—Ä–µ–º–∏—è—Ö (Bonus Report)

### üìç –û–ø–∏—Å–∞–Ω–∏–µ

–û—Ç—á–µ—Ç —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –ø—Ä–µ–º–∏–∏ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è KPI –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π.

### üéØ –õ–æ–≥–∏–∫–∞ —Ä–∞—Å—á–µ—Ç–æ–≤

**–ë–∞–∑–æ–≤–∞—è –ø—Ä–µ–º–∏—è:** 300 z≈Ç

**KPI –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏:**
1. **–î–æ—Ö–æ–¥ (Income)** - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–ª–∞–Ω–∞ –ø–æ –¥–æ—Ö–æ–¥—É
2. **–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (Activity)** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏
3. **–ö–æ–Ω–≤–µ—Ä—Å–∏—è (Conversion)** - –ø—Ä–æ—Ü–µ–Ω—Ç –ø–µ—Ä–µ—Ö–æ–¥–∞ –≤ –ø–µ—Ä–≤—ã–π –∑–∞–∫–∞–∑
4. **–ö–∞—á–µ—Å—Ç–≤–æ (Quality)** - –∫–∞—á–µ—Å—Ç–≤–æ —Ä–∞–±–æ—Ç—ã —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏

**–§–æ—Ä–º—É–ª–∞:**
```
–ü—Ä–µ–º–∏—è = –ë–∞–∑–æ–≤–∞—è –ø—Ä–µ–º–∏—è √ó (KPI_1 + KPI_2 + KPI_3 + KPI_4) / 4
```

---

## üìà –û—Ç—á–µ—Ç –æ –¥–æ—Ö–æ–¥–∞—Ö (Income Report)

### üìç –û–ø–∏—Å–∞–Ω–∏–µ

–û—Ç—á–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–æ—Ö–æ–¥ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤ –∑–∞ –ø–µ—Ä–∏–æ–¥ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∑–∞–∫–∞–∑–æ–≤ –∫–ª–∏–µ–Ω—Ç–æ–≤.

### üéØ –õ–æ–≥–∏–∫–∞ —Ä–∞—Å—á–µ—Ç–æ–≤

**–ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö:** —Ç–∞–±–ª–∏—Ü–∞ `planfix_orders`

**–†–∞—Å—á–µ—Ç –¥–æ—Ö–æ–¥–∞:**
```python
income = sum(order.amount for order in orders 
             where order.manager == manager 
             and order.date in period
             and order.status == 'paid')
```

**–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞:**
- –ü–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º
- –ü–æ –ø–µ—Ä–∏–æ–¥–∞–º (—Ç–µ–∫—É—â–∏–π –º–µ—Å—è—Ü, –ø—Ä–µ–¥—ã–¥—É—â–∏–π –º–µ—Å—è—Ü)

---

## üìä –û—Ç—á–µ—Ç –æ–± –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (Activity Report)

### üìç –û–ø–∏—Å–∞–Ω–∏–µ

–û—Ç—á–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤ —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏.

### üéØ –õ–æ–≥–∏–∫–∞ —Ä–∞—Å—á–µ—Ç–æ–≤

**–ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö:** —Ç–∞–±–ª–∏—Ü–∞ `planfix_tasks`

**–¢–∏–ø—ã –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π:**
- –ó–≤–æ–Ω–∫–∏
- –í—Å—Ç—Ä–µ—á–∏
- –ü–∏—Å—å–º–∞
- –î—Ä—É–≥–∏–µ –∑–∞–¥–∞—á–∏

**–†–∞—Å—á–µ—Ç:**
```python
activity_count = count(tasks where 
                      task.manager == manager
                      and task.date in period
                      and task.completed == true)
```

---

## üìã –û—Ç—á–µ—Ç KPI (KPI Report)

### üìç –û–ø–∏—Å–∞–Ω–∏–µ

–°–≤–æ–¥–Ω—ã–π –æ—Ç—á–µ—Ç –ø–æ –≤—Å–µ–º KPI –ø–æ–∫–∞–∑–∞—Ç–µ–ª—è–º –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤.

### üéØ –õ–æ–≥–∏–∫–∞ —Ä–∞—Å—á–µ—Ç–æ–≤

–û–±—ä–µ–¥–∏–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑:
- –û—Ç—á–µ—Ç–∞ –æ –¥–æ—Ö–æ–¥–∞—Ö
- –û—Ç—á–µ—Ç–∞ –æ–± –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- –û—Ç—á–µ—Ç–∞ –æ —Å—Ç–∞—Ç—É—Å–∞—Ö
- –û—Ç—á–µ—Ç–∞ –æ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏

**–§–æ—Ä–º—É–ª–∞ –æ–±—â–µ–≥–æ KPI:**
```python
total_kpi = (income_kpi + activity_kpi + conversion_kpi + quality_kpi) / 4
```

---

## üî¢ –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ

–í—Å–µ –æ—Ç—á–µ—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ (—Å–æ–≥–ª–∞—Å–Ω–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º):
```python
from core.kpi_utils import math_round

# –ü—Ä–∏–º–µ—Ä: 12.5 ‚Üí 13, 12.4 ‚Üí 12
percentage = math_round(value / total * 100)
```

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

1. **–ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å:** Europe/Warsaw (Poland)
2. **–§–æ—Ä–º–∞—Ç –¥–∞—Ç –≤ –±–∞–∑–µ:** DD-MM-YYYY (–Ω–∞–ø—Ä–∏–º–µ—Ä, 17-10-2025)
3. **–†–∞–±–æ—á–∏–µ –¥–Ω–∏:** –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫-–ø—è—Ç–Ω–∏—Ü–∞ (—Å—É–±–±–æ—Ç–∞ –∏ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ –∏—Å–∫–ª—é—á–∞—é—Ç—Å—è)
4. **–£–¥–∞–ª–µ–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã:** –∏—Å–∫–ª—é—á–∞—é—Ç—Å—è –∏–∑ –≤—Å–µ—Ö —Ä–∞—Å—á–µ—Ç–æ–≤ (`is_deleted = true`)

