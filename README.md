# Planfix KPI Repository

–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ KPI –æ—Ç—á–µ—Ç–æ–≤ –∏ Telegram –±–æ—Ç–∞.

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
planfix_kpi/
‚îú‚îÄ‚îÄ bot/                              # Telegram Bot —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
‚îÇ   ‚îî‚îÄ‚îÄ api/
‚îÇ       ‚îî‚îÄ‚îÄ telegram_webhook.py       # Webhook API –¥–ª—è –∫–æ–º–∞–Ω–¥ /premia_current, /premia_previous
‚îú‚îÄ‚îÄ .github/workflows/                # GitHub Actions
‚îÇ   ‚îú‚îÄ‚îÄ manual-bot-commands.yml       # Workflow –¥–ª—è –∫–æ–º–∞–Ω–¥ –±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ send_all_reports.yml          # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤—Å–µ—Ö –æ—Ç—á–µ—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ report-manual-send.yml        # –†—É—á–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç—á–µ—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ planfix-manual-sync.yml       # –†—É—á–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ scripts/                          # –û—Å–Ω–æ–≤–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ core/                         # KPI –ª–æ–≥–∏–∫–∞ (–ö–†–ò–¢–ò–ß–ï–°–ö–ò –ù–£–ñ–ù–ê)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config.py                 # MANAGERS_KPI
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ kpi_engine.py             # KPI –¥–≤–∏–∂–æ–∫
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ kpi_data.py               # KPI –¥–∞–Ω–Ω—ã–µ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ kpi_report.py             # KPI –æ—Ç—á–µ—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ kpi_utils.py              # KPI —É—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ report_formatter.py       # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ exporters/                    # –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –∏–∑ Planfix
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ planfix_export_clients.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ planfix_export_orders.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ planfix_export_tasks.py
‚îÇ   ‚îú‚îÄ‚îÄ reports/                      # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ report_activity.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ report_bonus.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ report_income.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ report_kpi.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ report_status.py
‚îÇ   ‚îî‚îÄ‚îÄ utils/                        # –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Planfix
‚îÇ       ‚îî‚îÄ‚îÄ planfix_utils.py
‚îú‚îÄ‚îÄ requirements.txt                  # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ env.example                       # –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îî‚îÄ‚îÄ .gitignore                        # Git ignore —Ñ–∞–π–ª—ã
```

## üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### 1. Telegram Bot
- **–ö–æ–º–∞–Ω–¥—ã:** `/premia_current`, `/premia_previous`
- **–§–∞–π–ª:** `bot/api/telegram_webhook.py`
- **Workflow:** `.github/workflows/manual-bot-commands.yml`

### 2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç—á–µ—Ç—ã
- **–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ:** –ï–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 19:00 –ø–æ –≤–∞—Ä—à–∞–≤—Å–∫–æ–º—É –≤—Ä–µ–º–µ–Ω–∏
- **Workflow:** `.github/workflows/reports/send_all_reports.yml`
- **–û—Ç—á–µ—Ç—ã:** Activity, KPI, Bonus, Income, Status

### 3. –†—É—á–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- **–û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç—á–µ—Ç–æ–≤:** `.github/workflows/report-manual-send.yml`
- **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö:** `.github/workflows/planfix-manual-sync.yml`

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `env.example` –≤ `.env`
2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ GitHub Secrets –¥–ª—è workflows
4. –†–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ webhook –Ω–∞ Render (–¥–ª—è –±–æ—Ç–∞)

## üìã –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–µ —Ñ–∞–π–ª—ã

**–ù–ï –£–î–ê–õ–Ø–¢–¨:**
- `scripts/core/` - –≤—Å—è –ø–∞–ø–∫–∞ —Å KPI –ª–æ–≥–∏–∫–æ–π (–ö–†–ò–¢–ò–ß–ï–°–ö–ò!)
- `scripts/core/config.py` - —Å–æ–¥–µ—Ä–∂–∏—Ç MANAGERS_KPI
- `scripts/report_*.py` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤
- `scripts/planfix_export_*.py` - —ç–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
- `scripts/planfix_utils.py` - —É—Ç–∏–ª–∏—Ç—ã
- `requirements.txt` - –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –í—Å–µ workflow —Ñ–∞–π–ª—ã –≤ `.github/workflows/`

## üéØ –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

- `/premia_current` - –æ—Ç—á–µ—Ç –ø–æ –ø—Ä–µ–º–∏–∏ –∑–∞ —Ç–µ–∫—É—â–∏–π –º–µ—Å—è—Ü
- `/premia_previous` - –æ—Ç—á–µ—Ç –ø–æ –ø—Ä–µ–º–∏–∏ –∑–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏–π –º–µ—Å—è—Ü

## üìä Workflows

- **send_all_reports** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤—Å–µ—Ö –æ—Ç—á–µ—Ç–æ–≤
- **manual-bot-commands** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥ –±–æ—Ç–∞
- **report-manual-send** - —Ä—É—á–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç—á–µ—Ç–æ–≤
- **planfix-manual-sync** - —Ä—É—á–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

## üìà –û–ø–∏—Å–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–æ–≤

### 1. Activity Report (report_activity.py)
**–§–æ—Ä–º–∞—Ç:** `AKTYWNO≈öƒÜ_DD.MM.YYYY`

**–ü–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç—å:** –ï–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 19:00

**KPI (13 –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π):**
- **–ó–∞–¥–∞—á–∏ (11 KPI):**
  - WDM - NawiƒÖzaƒá pierwszy kontakt
  - PRZ - Przeprowadziƒá pierwszƒÖ rozmowƒô telefonicznƒÖ
  - ZKL - Zadzwoniƒá do klienta
  - SPT - Przeprowadziƒá spotkanie
  - MAT - Wys≈Çaƒá materia≈Çy
  - TPY - Odpowiedzieƒá na pytanie techniczne
  - MSP - Zapisaƒá na media spo≈Çeczno≈õciowe
  - NOW - Opowiedzieƒá o nowo≈õciach
  - OPI - Zebraƒá opinie
  - WRK - Przywr√≥ciƒá klienta
  - KNT - Tworzyƒá kontent

- **–ó–∞–∫–∞–∑—ã (2 KPI):**
  - OFW - –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
  - ZAM - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–µ –∑–∞–∫–∞–∑—ã

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —á–∞—Å–∞–º (0-23)
- –í—Å–µ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–∞–±–æ—á–∏–µ —á–∞—Å—ã 9:00-16:59
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —á–∞—Å—ã —Å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é
- ‚ö†Ô∏è **–ö–ª–∏–µ–Ω—Ç—ã (NWI, WTR, PSK) –ù–ï –≤–∫–ª—é—á–µ–Ω—ã –≤ –æ—Ç—á–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏**

---

### 2. KPI Report (report_kpi.py)
**–§–æ—Ä–º–∞—Ç:** `KPI_DD.MM.YYYY` (–¥–Ω–µ–≤–Ω–æ–π), `KPI_MM.YYYY` (–º–µ—Å—è—á–Ω—ã–π)

**–ü–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç—å:** –ï–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 19:00 (–æ–±–∞ –æ—Ç—á–µ—Ç–∞)

**–†–∞–∑–¥–µ–ª—ã:**
1. **–ö–ª–∏–µ–Ω—Ç—ã:** NWI, WTR, PSK
2. **–ó–∞–¥–∞—á–∏:** WDM, PRZ, KZI, ZKL, SPT, MAT, TPY, MSP, NOW, OPI, WRK, KNT, TTL
3. **–ó–∞–∫–∞–∑—ã:** OFW, ZAM, PRC (–≤—ã—Ä—É—á–∫–∞)

---

### 3. Bonus Report (report_bonus.py)
**–§–æ—Ä–º–∞—Ç:** `PREMIA_MM.YYYY`

**–ü–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç—å:** –ï–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 19:00 + –ø–æ –∫–æ–º–∞–Ω–¥–µ –±–æ—Ç–∞

**–ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞:**
- `/premia_current` - —Ç–µ–∫—É—â–∏–π –º–µ—Å—è—Ü
- `/premia_previous` - –ø—Ä–µ–¥—ã–¥—É—â–∏–π –º–µ—Å—è—Ü

**–†–∞—Å—á–µ—Ç:**
- SUM - —Å—É–º–º–∞ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤ –≤—Å–µ—Ö KPI
- FND - –±–∞–∑–æ–≤—ã–π —Ñ–æ–Ω–¥ –ø—Ä–µ–º–∏–∏
- PRK - –ø—Ä–µ–º–∏—è –ø–æ KPI (FND √ó SUM)
- PRW - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–µ–º–∏—è (–ø—Ä–æ–≤–∏–∑–∏—è)
- TOT - –æ–±—â–∞—è –ø—Ä–µ–º–∏—è (PRK + PRW)

---

### 4. Income Report (report_income.py)
**–§–æ—Ä–º–∞—Ç:** `PRZYCHODY_MM.YYYY`

**–ü–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç—å:** –ï–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 19:00

**–ü–æ–∫–∞–∑–∞—Ç–µ–ª–∏:**
- **Fakt (‚ñà)** - —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–∫–∞–∑—ã
- **D≈Çug (‚ñí)** - –∑–∞–∫–∞–∑—ã –≤ –¥–æ–ª–≥ (—Å—Ç–∞—Ç—É—Å 140)
- **Brak (‚ñë)** - –Ω–µ–¥–æ—Å—Ç–∞—é—â–∞—è –¥–æ –ø–ª–∞–Ω–∞ —Å—É–º–º–∞
- **Plan** - –ø–ª–∞–Ω–æ–≤–∞—è –≤—ã—Ä—É—á–∫–∞

---

### 5. Status Report (report_status.py)
**–§–æ—Ä–º–∞—Ç:** `WORONKA_DD.MM.YYYY`

**–ü–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç—å:** –ï–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 19:00

**–°—Ç–∞—Ç—É—Å—ã –∫–ª–∏–µ–Ω—Ç–æ–≤ (9):**
- NWI - Nowi
- WTR - W trakcie
- PSK - Perspektywiczni
- PIZ - Pierwsze zam√≥wienie
- STL - Stali klienci (‚â§30 –¥–Ω–µ–π —Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∑–∞–∫–∞–∑–∞)
- NAK - Nieaktywni klienci (>30 –¥–Ω–µ–π)
- REZ - Rezygnacja
- BRK - Brak kontaktu
- ARC - Archiwum

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –î–∏–Ω–∞–º–∏–∫–∞ ‚ñ≤‚ñº –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞ –¥–µ–Ω—å
- STL/NAK —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Å—Ç–æ—Ä–∏–∏
- –û—Å—Ç–∞–ª—å–Ω—ã–µ - –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–Ω–µ–≤–Ω–æ–≥–æ –ø—Ä–∏—Ç–æ–∫–∞
